{
	"$schema": "./schemas/asset-map.schema.json",
	"_comment": "Dragon Warrior IV NES ROM Asset Map - Complete data locations",
	"rom_info": {
		"name": "Dragon Warrior IV (US)",
		"system": "NES",
		"mapper": "MMC5 (5)",
		"prg_size": 524288,
		"chr_size": 262144,
		"prg_banks": 32,
		"chr_banks": 32,
		"header_size": 16
	},
	"debugging": {
		"cdl_file": "C:\\Users\\me\\source\\repos\\GameInfo\\Games\\NES\\Dragon Warrior 4 (NES)\\Debugging\\Dragon Warrior IV (1992-10)(Enix)(US).cdl",
		"cdl_sources_dir": "C:\\Users\\me\\source\\repos\\GameInfo\\Games\\NES\\Dragon Warrior 4 (NES)\\Debugging\\cdls",
		"cdl_merge_script": "C:\\Users\\me\\source\\repos\\GameInfo\\scripts\\merge-dw4-cdls.ps1",
		"mlb_file": "C:\\Users\\me\\source\\repos\\GameInfo\\Games\\NES\\Dragon Warrior 4 (NES)\\Debugging\\Dragon Warrior IV (1992-10)(Enix)(US).mlb",
		"tbl_file": "C:\\Users\\me\\source\\repos\\GameInfo\\Games\\NES\\Dragon Warrior 4 (NES)\\Debugging\\Dragon Warrior 4 (NES) - English.tbl",
		"cdl_coverage": {
			"verified_date": "2026-01-03",
			"files_merged": 13,
			"overall_coverage": "80.76%",
			"code_bytes": 124414,
			"data_bytes": 312438,
			"covered_bytes": 423428,
			"unlogged_bytes": 100869,
			"total_bytes": 524297
		}
	},
	"cdl_verification": {
		"chapter1": {
			"status": "FULLY_VERIFIED",
			"verified_date": "2026-01-03",
			"location_count": 8,
			"banks": ["0x09", "0x0A"],
			"bank_coverage": {
				"0x09": "96.7%",
				"0x0A": "84.9%"
			},
			"components": {
				"burland_castle": { "map_id": "0x02", "bank": "0x09", "status": "verified" },
				"izmit": { "map_id": "0x0E", "bank": "0x09", "status": "verified" },
				"strathbaile": { "map_id": "0x0F", "bank": "0x09", "status": "verified" },
				"well_dungeon": { "map_id": "0x10", "bank": "0x0A", "status": "verified" },
				"loch_tower_base": { "map_id": "0x11", "bank": "0x0A", "status": "verified" },
				"loch_tower_mid": { "map_id": "0x12", "bank": "0x0A", "status": "verified" },
				"loch_tower_top": { "map_id": "0x13", "bank": "0x0A", "status": "verified" },
				"overworld": { "map_id": "0x00", "bank": "0x0B", "status": "verified" }
			},
			"notes": "All 8/8 Chapter 1 (Ragnar) locations verified with merged CDL."
		},
		"chapter2": {
			"status": "FULLY_VERIFIED",
			"verified_date": "2026-01-03",
			"location_count": 11,
			"banks": ["0x0A"],
			"bank_coverage": {
				"0x0A": "84.9%"
			},
			"components": {
				"santeem_castle": { "map_id": "0x20", "coverage": "80.6%", "status": "verified" },
				"santeem_basement": { "map_id": "0x21", "coverage": "83.5%", "status": "verified" },
				"santeem_tower": { "map_id": "0x22", "coverage": "70.9%", "status": "verified" },
				"surene": { "map_id": "0x23", "coverage": "42.4%", "status": "verified" },
				"tempe": { "map_id": "0x24", "coverage": "68.3%", "status": "verified" },
				"tempe_cave_b1": { "map_id": "0x25", "coverage": "68.1%", "status": "verified" },
				"tempe_cave_b2": { "map_id": "0x26", "coverage": "79.7%", "status": "verified" },
				"frenor": { "map_id": "0x27", "coverage": "71.0%", "status": "verified" },
				"endor": { "map_id": "0x28", "coverage": "89.9%", "status": "verified" },
				"endor_colosseum": { "map_id": "0x29", "coverage": "49.5%", "status": "verified" },
				"endor_castle": { "map_id": "0x2A", "coverage": "78.7%", "status": "verified" }
			},
			"notes": "All 11/11 Chapter 2 (Alena) locations verified with merged CDL (>40% coverage each)."
		},
		"chapter3": {
			"status": "FULLY_VERIFIED",
			"verified_date": "2026-01-03",
			"location_count": 12,
			"banks": ["0x09", "0x0A"],
			"bank_coverage": {
				"0x09": "96.7%",
				"0x0A": "84.9%"
			},
			"components": {
				"lakanaba": { "map_id": "0x30", "bank": "0x09", "status": "verified" },
				"lakanaba_weapon_shop": { "map_id": "0x31", "bank": "0x09", "status": "verified" },
				"taloon_house": { "map_id": "0x32", "bank": "0x09", "status": "verified" },
				"east_cave_f1": { "map_id": "0x33", "bank": "0x0A", "status": "verified" },
				"east_cave_f2": { "map_id": "0x34", "bank": "0x0A", "status": "verified" },
				"fox_village": { "map_id": "0x35", "bank": "0x09", "status": "verified" },
				"bonmalmo": { "map_id": "0x36", "bank": "0x09", "status": "verified" },
				"bonmalmo_castle": { "map_id": "0x37", "bank": "0x09", "status": "verified" },
				"silver_cave_f1": { "map_id": "0x38", "bank": "0x0A", "status": "verified" },
				"silver_cave_f2": { "map_id": "0x39", "bank": "0x0A", "status": "verified" },
				"ship": { "map_id": "0x3A", "bank": "0x09", "status": "verified" },
				"tunnel": { "map_id": "0x3B", "bank": "0x09", "status": "verified" }
			},
			"notes": "All 12/12 Chapter 3 (Taloon) locations verified with merged CDL."
		},
		"chapter4": {
			"status": "FULLY_VERIFIED",
			"verified_date": "2026-01-03",
			"location_count": 12,
			"banks": ["0x0D", "0x0E", "0x0F"],
			"bank_coverage": {
				"0x0D": "79.1%",
				"0x0E": "92.2%",
				"0x0F": "79.1%"
			},
			"components": {
				"monbaraba": { "map_id": "0x40", "bank": "0x0D", "status": "verified" },
				"theater": { "map_id": "0x41", "bank": "0x0D", "status": "verified" },
				"sisters_room": { "map_id": "0x42", "bank": "0x0D", "status": "verified" },
				"cave_monbaraba_f1": { "map_id": "0x43", "bank": "0x0D", "status": "verified" },
				"cave_monbaraba_f2": { "map_id": "0x44", "bank": "0x0D", "status": "verified" },
				"haville": { "map_id": "0x45", "bank": "0x0E", "status": "verified" },
				"mine_upper": { "map_id": "0x46", "bank": "0x0E", "status": "verified" },
				"mine_lower": { "map_id": "0x47", "bank": "0x0E", "status": "verified" },
				"kievs": { "map_id": "0x48", "bank": "0x0F", "status": "verified" },
				"kievs_castle_main": { "map_id": "0x49", "bank": "0x0F", "status": "verified" },
				"kievs_castle_throne": { "map_id": "0x4A", "bank": "0x0F", "status": "verified" },
				"kievs_castle_secret": { "map_id": "0x4B", "bank": "0x0F", "status": "verified" }
			},
			"notes": "All 12/12 Chapter 4 (Nara/Mara) locations verified with merged CDL."
		},
		"chapter5": {
			"status": "FULLY_VERIFIED",
			"verified_date": "2026-01-03",
			"location_count": 16,
			"banks": ["0x10", "0x11", "0x12", "0x13", "0x14"],
			"bank_coverage": {
				"0x10": "82.0%",
				"0x11": "56.7%",
				"0x12": "68.2%",
				"0x13": "75.4%",
				"0x14": "69.7%"
			},
			"components": {
				"hero_village": { "map_id": "0x50", "bank": "0x10", "status": "verified" },
				"hero_house": { "map_id": "0x51", "bank": "0x10", "status": "verified" },
				"secret_passage": { "map_id": "0x52", "bank": "0x10", "status": "verified" },
				"branca": { "map_id": "0x53", "bank": "0x10", "status": "verified" },
				"endor_ch5": { "map_id": "0x54", "bank": "0x11", "status": "verified" },
				"endor_castle_ch5": { "map_id": "0x55", "bank": "0x11", "status": "verified" },
				"endor_casino": { "map_id": "0x56", "bank": "0x11", "status": "verified" },
				"mintos": { "map_id": "0x57", "bank": "0x12", "status": "verified" },
				"zenithian_tower_f1": { "map_id": "0x58", "bank": "0x12", "status": "verified" },
				"zenithian_tower_f2": { "map_id": "0x59", "bank": "0x12", "status": "verified" },
				"zenithian_tower_f3": { "map_id": "0x5A", "bank": "0x12", "status": "verified" },
				"zenithia": { "map_id": "0x5B", "bank": "0x13", "status": "verified" },
				"zenithia_throne": { "map_id": "0x5C", "bank": "0x13", "status": "verified" },
				"psaro_entrance": { "map_id": "0x5D", "bank": "0x14", "status": "verified" },
				"psaro_main": { "map_id": "0x5E", "bank": "0x14", "status": "verified" },
				"psaro_throne": { "map_id": "0x5F", "bank": "0x14", "status": "verified" }
			},
			"notes": "All 16/16 Chapter 5 (Hero) locations verified with merged CDL."
		},
		"data_banks": {
			"monster_data": {
				"bank": "0x06",
				"coverage": "99.8%",
				"status": "VERIFIED",
				"dw4lib_class": "DW4Lib.DataStructures.Monster",
				"table_address": "0xA2A2",
				"record_size": 27
			},
			"item_data": {
				"bank": "0x07",
				"coverage": "78.1%",
				"status": "VERIFIED",
				"dw4lib_class": "DW4Lib.DataStructures.Item",
				"record_size": 8
			}
		}
	},
	"text_encoding": {
		"_comment": "DW4 uses custom 8-bit encoding with DTE compression",
		"csharp_impl": "DW4Lib.Text.DW4Text",
		"python_impl": "tools/verify_dte_table.py",
		"encoding_ranges": {
			"uppercase_AZ": {"range": "0x80-0x99", "mapped_to": "A-Z (26 chars)"},
			"lowercase_az": {"range": "0x9A-0xB3", "mapped_to": "a-z (26 chars)"},
			"digits_09": {"range": "0xB4-0xBD", "mapped_to": "0-9 (10 chars)"},
			"punctuation": {"range": "0xBE-0xCA", "mapped_to": ".,!?':;-/() and space"},
			"dte_pairs": {"range": "0xE0-0xFF", "mapped_to": "32 common letter pairs"},
			"control_codes": {"range": "0x00-0x10", "mapped_to": "text engine commands"}
		},
		"dte_table": {
			"rom_location": {
				"bank": "0x16",
				"cpu_address": "0xB3A4",
				"file_offset": "0x5B3B4"
			},
			"size": 256,
			"entries": 128,
			"entry_size": 2,
			"common_pairs": [
				{"byte": "0xE0", "pair": "th"},
				{"byte": "0xE1", "pair": "he"},
				{"byte": "0xE2", "pair": "in"},
				{"byte": "0xE3", "pair": "er"},
				{"byte": "0xE4", "pair": "an"},
				{"byte": "0xE5", "pair": "re"},
				{"byte": "0xE6", "pair": "on"},
				{"byte": "0xE7", "pair": "en"},
				{"byte": "0xE8", "pair": "at"},
				{"byte": "0xE9", "pair": "ed"},
				{"byte": "0xEA", "pair": "ou"},
				{"byte": "0xEB", "pair": "to"}
			],
			"compression_ratio": "~33%",
			"check_code_addr": "Bank 22 $8272",
			"notes": "Bytes >= 0x80 trigger DTE lookup. Some entries are recursive (contain DTE codes)."
		},
		"control_codes": {
			"0x00": "NOP",
			"0x01": "DELAY",
			"0x02": "CLEAR",
			"0x03": "NEWLINE",
			"0x04": "WAIT_KEY",
			"0x10": "END_STRING"
		},
		"text_banks": ["0x10", "0x11", "0x12", "0x13", "0x14"],
		"docs": [
			"docs/formats/TEXT_SYSTEM.md",
			"docs/analysis/dte_dictionary_table.md",
			"docs/analysis/text_system_overview.md"
		]
	},
	"event_system": {
		"_comment": "DW4 event scripting for dialog, cutscenes, battles, and story progression",
		"csharp_impl": {
			"nes_events": "DW4Lib.Events.EventScript",
			"snes_events": "DQ4rLib.Models.EventScript",
			"converter": "DW4Lib.Events.EventScriptConverter"
		},
		"python_impl": "tools/extract_event_scripts.py",
		"code_bank": "0x04",
		"code_bank_offset": "0x10010",
		"npc_format": {
			"size": 8,
			"fields": [
				{"offset": 0, "name": "npc_id", "type": "uint8"},
				{"offset": 1, "name": "x_pos", "type": "uint8"},
				{"offset": 2, "name": "y_pos", "type": "uint8"},
				{"offset": 3, "name": "movement", "type": "uint8", "values": {
					"0": "Stationary", "1": "Wander 1 tile", "2": "Wander 2 tiles",
					"3": "Patrol horizontal", "4": "Patrol vertical", "5": "Follow player", "6+": "Custom paths"
				}},
				{"offset": 4, "name": "facing", "type": "uint8", "values": {"0": "Down", "1": "Up", "2": "Left", "3": "Right"}},
				{"offset": 5, "name": "sprite_id", "type": "uint8"},
				{"offset": 6, "name": "dialog_ptr", "type": "uint16_le"}
			]
		},
		"trigger_types": ["Talk", "Touch", "Examine", "Auto"],
		"script_opcodes": {
			"flow_control": {
				"0x00": "END",
				"0x01": "GOTO",
				"0x02": "CALL",
				"0x03": "RET",
				"0x04": "IF_FLAG",
				"0x05": "IF_NOT_FLAG"
			},
			"flags": {
				"0x06": "SET_FLAG",
				"0x07": "CLEAR_FLAG"
			},
			"dialog": {
				"0x08": "TEXT",
				"0x09": "CHOICE",
				"0x0A": "SHOP",
				"0x0B": "INN",
				"0x0C": "SAVE",
				"0x0D": "CHURCH"
			},
			"items": {
				"0x0E": "GIVE_ITEM",
				"0x0F": "TAKE_ITEM",
				"0x10": "CHECK_GOLD",
				"0x11": "GIVE_GOLD"
			},
			"map": {
				"0x12": "WARP",
				"0x13": "FACE",
				"0x14": "MOVE",
				"0x15": "WAIT"
			},
			"audio": {
				"0x16": "PLAY_MUSIC",
				"0x17": "PLAY_SFX",
				"0x18": "FADE_OUT",
				"0x19": "FADE_IN"
			},
			"party": {
				"0x20": "ADD_MEMBER",
				"0x21": "REMOVE_MEMBER",
				"0x22": "CHAPTER"
			}
		},
		"docs": "docs/formats/EVENT_SYSTEM.md"
	},
	"banks": {
		"0x00": {
			"name": "Core Engine",
			"type": "code",
			"file_offset": "0x00010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x01": {
			"name": "Menu System",
			"type": "code",
			"file_offset": "0x04010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x02": {
			"name": "Battle System Part 1",
			"type": "code",
			"file_offset": "0x08010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x03": {
			"name": "Battle System Part 2",
			"type": "code",
			"file_offset": "0x0C010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x04": {
			"name": "NPC/Event Code",
			"type": "code",
			"file_offset": "0x10010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x05": {
			"name": "AI/Monster Behavior",
			"type": "code",
			"file_offset": "0x14010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x06": {
			"name": "Monster Data Tables",
			"type": "data",
			"file_offset": "0x18010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["monsters", "monster_graphics_pointers"]
		},
		"0x07": {
			"name": "Item/Equipment Data",
			"type": "data",
			"file_offset": "0x1C010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["items", "equipment", "shops"]
		},
		"0x08": {
			"name": "Tileset Data",
			"type": "data",
			"file_offset": "0x20010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["tilesets", "encounter_zones"]
		},
		"0x09": {
			"name": "Map Data Part 1",
			"type": "data",
			"file_offset": "0x24010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["maps_0x00-0x1F"]
		},
		"0x0A": {
			"name": "Map Data Part 2",
			"type": "data",
			"file_offset": "0x28010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["maps_0x20-0x3F"]
		},
		"0x0B": {
			"name": "Map Data Part 3 & Overworld",
			"type": "data",
			"file_offset": "0x2C010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["maps_0x40-0x48", "overworld"]
		},
		"0x0C": {
			"name": "Map Tile Graphics Page 0",
			"type": "graphics",
			"file_offset": "0x30010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "2bpp_nes"
		},
		"0x0D": {
			"name": "Map Tile Graphics Page 1-2",
			"type": "graphics",
			"file_offset": "0x34010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "2bpp_nes"
		},
		"0x0E": {
			"name": "Character Sprite Graphics",
			"type": "graphics",
			"file_offset": "0x38010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "2bpp_nes"
		},
		"0x0F": {
			"name": "Map Loading Code",
			"type": "code",
			"file_offset": "0x3C010",
			"cpu_address": "0x8000",
			"size": 16384
		},
		"0x10": {
			"name": "Script/Dialog Text 1",
			"type": "text",
			"file_offset": "0x40010",
			"cpu_address": "0x8000",
			"size": 16384,
			"encoding": "dw4_dte"
		},
		"0x11": {
			"name": "Script/Dialog Text 2",
			"type": "text",
			"file_offset": "0x44010",
			"cpu_address": "0x8000",
			"size": 16384,
			"encoding": "dw4_dte"
		},
		"0x12": {
			"name": "Script/Dialog Text 3",
			"type": "text",
			"file_offset": "0x48010",
			"cpu_address": "0x8000",
			"size": 16384,
			"encoding": "dw4_dte"
		},
		"0x13": {
			"name": "Script/Dialog Text 4",
			"type": "text",
			"file_offset": "0x4C010",
			"cpu_address": "0x8000",
			"size": 16384,
			"encoding": "dw4_dte"
		},
		"0x14": {
			"name": "Script/Dialog Text 5",
			"type": "text",
			"file_offset": "0x50010",
			"cpu_address": "0x8000",
			"size": 16384,
			"encoding": "dw4_dte"
		},
		"0x15": {
			"name": "Window/Menu Graphics",
			"type": "graphics",
			"file_offset": "0x54010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "2bpp_nes"
		},
		"0x16": {
			"name": "Battle Graphics & DTE Table",
			"type": "mixed",
			"file_offset": "0x58010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["battle_graphics", "dte_table"],
			"subsections": {
				"dte_table": {
					"cpu_address": "0xB3A4",
					"file_offset": "0x5B3B4",
					"entry_count": 128,
					"entry_size": 2,
					"total_size": 256,
					"byte_range": "0x80-0xFF",
					"format": "Each 2-byte entry expands to character pair",
					"csharp_impl": "DW4Lib.Text.DW4Text.DtePairs",
					"check_code": "Bank 22 $8272 (CMP #$80; BCS $829A)",
					"categories": {
						"menu_ui": {"range": "0x80-0x8F", "desc": "Menu/UI text pairs"},
						"dialogue": {"range": "0x90-0xAF", "desc": "Common dialogue pairs"},
						"common": {"range": "0xB0-0xCF", "desc": "High-frequency letter pairs"},
						"endings": {"range": "0xD0-0xEF", "desc": "Word endings and spaces"},
						"special": {"range": "0xF0-0xFF", "desc": "Special/recursive DTE"}
					},
					"common_pairs": ["th", "he", "in", "er", "an", "re", "on", "en", "at", "ed", "ou", "to"],
					"notes": "DTE provides ~33% text compression. Some entries are recursive (contain DTE codes themselves)."
				}
			}
		},
		"0x17": {
			"name": "Casino Code & Map Pointer Tables",
			"type": "code",
			"file_offset": "0x5C010",
			"cpu_address": "0x8000",
			"size": 16384,
			"assets": ["casino", "map_pointers", "npc_tables"],
			"cdl_coverage": {
				"verified_date": "2026-01-03",
				"total_bytes": 16384,
				"code_bytes": 0,
				"data_bytes": 3574,
				"unlogged_bytes": 12810,
				"coverage_percent": 21.81,
				"notes": "Bank is primarily data (0 code bytes). Low coverage suggests many lookup tables not yet accessed in gameplay."
			},
			"subsections": {
				"video_poker": {
					"entry_point": "0x8000",
					"hand_eval": "0x81F2",
					"payout_table": "0x81C5",
					"double_up": "0x8654",
					"main_loop": "0x8084-0x80AE"
				},
				"monster_arena": {
					"entry_point": "0x9000",
					"display_groups": "0x9100",
					"place_bet": "0x9200",
					"execute_fight": "0x9300",
					"calc_payout": "0x9400"
				},
				"map_pointer_table": {
					"cpu_address": "0xB08D",
					"file_offset": "0x5F09D",
					"entry_count": 73,
					"entry_size": 2,
					"total_size": 146,
					"format": "array of 16-bit pointers to map info",
					"csharp_impl": "DW4Lib.ROM.DW4Rom.ReadMapPointerTable()",
					"notes": "Pointer table for all 73 map groups (0x00-0x48). Each 2-byte entry points to map info data."
				},
				"map_info_data": {
					"cpu_address": "0xB121",
					"cpu_address_end": "0xB4AE",
					"file_offset": "0x5F131",
					"format": "3 bytes per submap",
					"csharp_impl": "DW4Lib.DataStructures.Maps.MapInfo",
					"field_format": {
						"byte0": "Tileset number (references Bank $08)",
						"byte1_2": "Map data address (little-endian, in map data bank)"
					},
					"data_banks": {
						"maps_0x00_to_0x2C": "Bank 0x09",
						"maps_0x2D_to_0x45": "Bank 0x0A",
						"maps_0x45_to_0x48": "Bank 0x0B"
					},
					"notes": "Each map group has 1-15 submaps. Bank for map data determined by GetMapDataBank(mapId) function at Bank $0F, $E9AD."
				}
			}
		},
		"0x18": {
			"name": "Music Data 1",
			"type": "audio",
			"file_offset": "0x60010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_nsf"
		},
		"0x19": {
			"name": "Music Data 2",
			"type": "audio",
			"file_offset": "0x64010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_nsf"
		},
		"0x1A": {
			"name": "Music Data 3",
			"type": "audio",
			"file_offset": "0x68010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_nsf"
		},
		"0x1B": {
			"name": "Music Data 4",
			"type": "audio",
			"file_offset": "0x6C010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_nsf"
		},
		"0x1C": {
			"name": "Sound Effects 1",
			"type": "audio",
			"file_offset": "0x70010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_sfx"
		},
		"0x1D": {
			"name": "Sound Effects 2",
			"type": "audio",
			"file_offset": "0x74010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_sfx"
		},
		"0x1E": {
			"name": "Sound Effects 3",
			"type": "audio",
			"file_offset": "0x78010",
			"cpu_address": "0x8000",
			"size": 16384,
			"format": "nes_sfx"
		},
		"0x1F": {
			"name": "Fixed Bank (Vectors)",
			"type": "code",
			"file_offset": "0x7C010",
			"cpu_address": "0xC000",
			"size": 16384,
			"fixed": true
		}
	},
	"assets": {
		"monsters": {
			"bank": "0x06",
			"cpu_address": "0xA2A2",
			"file_offset": "0x1A2B2",
			"entry_size": 27,
			"count": 180,
			"format": "monster_data_v2",
			"cdl_verified": true,
			"cdl_coverage": "99.8%",
			"dw4lib_class": "DW4Lib.DataStructures.Monster",
			"fields": [
				{"name": "experience", "offset": 0, "size": 2, "type": "uint16_le", "description": "Experience points (little endian)"},
				{"name": "gold", "offset": 2, "size": 2, "type": "uint16_le", "description": "Gold dropped (little endian)"},
				{"name": "hit_points", "offset": 4, "size": 2, "type": "uint16_le", "description": "HP (little endian)"},
				{"name": "attack", "offset": 6, "size": 1, "type": "uint8", "description": "Attack power"},
				{"name": "defense", "offset": 7, "size": 1, "type": "uint8", "description": "Defense power"},
				{"name": "agility", "offset": 8, "size": 1, "type": "uint8", "description": "Agility"},
				{"name": "skill_data", "offset": 9, "size": 6, "type": "bytes", "description": "Skill/ability bytes - action chance, count, HP regen"},
				{"name": "behavior_data", "offset": 15, "size": 4, "type": "bytes", "description": "AI behavior patterns"},
				{"name": "item_drop_id", "offset": 19, "size": 1, "type": "uint8", "description": "Item drop ID (references item table)"},
				{"name": "unknown20", "offset": 20, "size": 1, "type": "uint8", "description": "Unknown (Vaxherd: byte 17)"},
				{"name": "unknown21", "offset": 21, "size": 1, "type": "uint8", "description": "Unknown (Vaxherd: byte 18)"},
				{"name": "metal_flags", "offset": 22, "size": 1, "type": "flags", "description": "Metal monster flags - bits 0-1: metal type (takes 0-1 dmg)"},
				{"name": "drop_rate_flags", "offset": 23, "size": 1, "type": "flags", "description": "Drop rate - bits 0-2: 0=0%, 1=1/2, 2=1/4, 3=1/8, 4=1/16, 5=1/32, 6=1/256, 7=100%"},
				{"name": "status_vulnerability", "offset": 24, "size": 1, "type": "flags", "description": "Status vulnerability - bit 6: paralysis, bit 7: confusion/bounce"},
				{"name": "unknown25", "offset": 25, "size": 1, "type": "uint8", "description": "Unknown byte"},
				{"name": "unknown26", "offset": 26, "size": 1, "type": "uint8", "description": "Unknown byte"}
			]
		},
		"items": {
			"bank": "0x07",
			"cpu_address": "0x8000",
			"file_offset": "0x1C010",
			"entry_size": 8,
			"count": 220,
			"format": "item_data_v2",
			"cdl_verified": true,
			"cdl_coverage": "78.1%",
			"dw4lib_class": "DW4Lib.DataStructures.Item",
			"fields": [
				{"name": "type_flags", "offset": 0, "size": 1, "type": "flags", "description": "Item type and equipment slot flags"},
				{"name": "stat_modifier", "offset": 1, "size": 1, "type": "int8", "description": "Stat modifier (signed - negative = cursed)"},
				{"name": "special_flags", "offset": 2, "size": 1, "type": "flags", "description": "Special effect flags"},
				{"name": "buy_price", "offset": 3, "size": 2, "type": "uint16_be", "description": "Buy price (big endian)"},
				{"name": "sell_price", "offset": 5, "size": 2, "type": "uint16_be", "description": "Sell price (big endian)"},
				{"name": "equip_flags", "offset": 7, "size": 1, "type": "flags", "description": "Who can equip - bit per character"}
			]
		},
		"spells": {
			"bank": "0x05",
			"cpu_address": "0x8000",
			"file_offset": "0x14010",
			"entry_size": 4,
			"count": 64,
			"format": "spell_data_v1",
			"fields": [
				{"name": "effect_type", "offset": 0, "size": 1, "type": "uint8"},
				{"name": "power", "offset": 1, "size": 1, "type": "uint8"},
				{"name": "target", "offset": 2, "size": 1, "type": "uint8"},
				{"name": "mp_cost", "offset": 3, "size": 1, "type": "uint8"}
			]
		},
		"casino": {
			"bank": "0x17",
			"location": {
				"town": "Endor",
				"map_id": "0x04",
				"poker_submap": "0x01",
				"arena_submap": "0x07"
			},
			"dq4rlib_class": "DQ4rLib.Casino.CasinoManager",
			"coin_storage": {
				"address_low": "0x62AD",
				"address_mid": "0x62AE",
				"address_high": "0x62AF",
				"max_value": 16777215
			},
			"video_poker": {
				"dq4rlib_class": "DQ4rLib.Casino.VideoPoker",
				"entry_point": "0x8000",
				"hand_eval": "0x81F2",
				"payout_table": "0x81C5",
				"double_up": "0x8654",
				"bet_selection": "0x8AAC",
				"card_buffer": "0x7635",
				"bet_range": [1, 2, 5, 10],
				"hands": [
					{"name": "Royal Flush", "multiplier": 500, "text_addr": "0x82E4"},
					{"name": "5 of a Kind", "multiplier": 250, "text_addr": "0x82F8"},
					{"name": "Straight Flush", "multiplier": 100, "text_addr": "0x8304"},
					{"name": "4 of a Kind", "multiplier": 50, "text_addr": "0x8313"},
					{"name": "Full House", "multiplier": 20},
					{"name": "Flush", "multiplier": 10, "text_addr": "0x832A"},
					{"name": "Straight", "multiplier": 5},
					{"name": "3 of a Kind", "multiplier": 3, "text_addr": "0x8339"},
					{"name": "2 Pairs", "multiplier": 2, "text_addr": "0x8345"},
					{"name": "1 Pair", "multiplier": 1}
				],
				"card_encoding": {
					"rank_bits": "0-3",
					"suit_bits": "4-5",
					"joker_flag": "bit 6",
					"suits": ["Spades", "Hearts", "Diamonds", "Clubs"]
				}
			},
			"monster_arena": {
				"dq4rlib_class": "DQ4rLib.Casino.MonsterArena",
				"entry_point": "0x9000",
				"display_groups": "0x9100",
				"place_bet": "0x9200",
				"execute_fight": "0x9300",
				"calc_payout": "0x9400",
				"bet_amounts": [10, 50, 100, 500],
				"odds_system": [
					{"odds": "2:1", "description": "Favorite", "payout": "2x"},
					{"odds": "3:1", "description": "Even match", "payout": "3x"},
					{"odds": "5:1", "description": "Underdog", "payout": "5x"},
					{"odds": "10:1", "description": "Long shot", "payout": "10x"}
				]
			},
			"documentation": [
				"docs/casino/casino-overview.md",
				"docs/casino/casino-poker.md",
				"docs/casino/casino-arena.md",
				"docs/casino/casino-prizes.md",
				"docs/casino/casino-implementation-plan.md"
			]
		},
		"characters": {
			"bank": "0x06",
			"cpu_address": "0x8800",
			"file_offset": "0x18810",
			"entry_size": 64,
			"count": 8,
			"format": "character_base_v1",
			"fields": [
				{"name": "base_hp", "offset": 0, "size": 2, "type": "uint16"},
				{"name": "base_mp", "offset": 2, "size": 2, "type": "uint16"},
				{"name": "base_str", "offset": 4, "size": 1, "type": "uint8"},
				{"name": "base_agi", "offset": 5, "size": 1, "type": "uint8"},
				{"name": "base_vit", "offset": 6, "size": 1, "type": "uint8"},
				{"name": "base_int", "offset": 7, "size": 1, "type": "uint8"},
				{"name": "base_luck", "offset": 8, "size": 1, "type": "uint8"},
				{"name": "growth_table_ptr", "offset": 9, "size": 2, "type": "pointer"}
			]
		},
		"exp_tables": {
			"bank": "0x27",
			"cpu_address": "0xB6ED",
			"file_offset": "0x6F6FD",
			"entry_size": 3,
			"count": 792,
			"format": "exp_table_v1",
			"notes": "99 levels Ã— 8 characters = 792 entries, 3 bytes per entry (24-bit)"
		},
		"shops": {
			"bank": "0x07",
			"cpu_address": "0x9000",
			"file_offset": "0x1D010",
			"format": "shop_data_v1",
			"notes": "Variable length, pointer table followed by item lists"
		},
		"maps": {
			"banks": ["0x09", "0x0A", "0x0B"],
			"count": 73,
			"format": "rle_compressed",
			"pointer_table": {
				"bank": "0x17",
				"cpu_address": "0x8000",
				"file_offset": "0x5C010"
			}
		},
		"text_dialog": {
			"banks": ["0x10", "0x11", "0x12", "0x13", "0x14"],
			"encoding": "dw4_dte",
			"format": "pointer_indexed",
			"notes": "DTE (Dual Tile Encoding) compressed text"
		},
		"chr_graphics": {
			"file_offset": "0x80010",
			"size": 262144,
			"format": "nes_2bpp",
			"tiles_per_bank": 256,
			"tile_size": 16,
			"banks": 32
		}
	},
	"extraction_targets": [
		{
			"name": "monsters_full",
			"output": "assets/json/monsters/monsters_extracted.json",
			"sources": ["monsters", "monster_stats_extended"],
			"merge_on": "id"
		},
		{
			"name": "items_full",
			"output": "assets/json/items/items_extracted.json",
			"sources": ["items"],
			"include_names": true
		},
		{
			"name": "characters_full",
			"output": "assets/json/characters/characters_extracted.json",
			"sources": ["characters", "exp_tables"],
			"include_growth": true
		},
		{
			"name": "chr_tiles",
			"output": "assets/graphics/chr/",
			"sources": ["chr_graphics"],
			"format": "png",
			"palette": "default_grayscale"
		}
	]
}
