# ============================================================================
# Dragon Warrior IV - Linker Configuration (ld65)
# ============================================================================
# MMC3 Mapper with 512KB PRG, CHR-RAM
# ============================================================================

MEMORY {
	# iNES Header
	HEADER:   start = $0000, size = $0010, file = %O, fill = yes;
	
	# PRG ROM Banks (32 Ã— 16KB = 512KB)
	PRG_00:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_01:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_02:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_03:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_04:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_05:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_06:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_07:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_08:   start = $8000, size = $4000, file = %O, fill = yes;  # Data tables
	PRG_09:   start = $8000, size = $4000, file = %O, fill = yes;  # Maps
	PRG_0A:   start = $8000, size = $4000, file = %O, fill = yes;  # Maps
	PRG_0B:   start = $8000, size = $4000, file = %O, fill = yes;  # Maps
	PRG_0C:   start = $8000, size = $4000, file = %O, fill = yes;  # Text
	PRG_0D:   start = $8000, size = $4000, file = %O, fill = yes;  # Text
	PRG_0E:   start = $8000, size = $4000, file = %O, fill = yes;  # Text
	PRG_0F:   start = $8000, size = $4000, file = %O, fill = yes;  # Fixed bank
	PRG_10:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_11:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_12:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_13:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_14:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_15:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_16:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_17:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_18:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_19:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_1A:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_1B:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_1C:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_1D:   start = $8000, size = $4000, file = %O, fill = yes;
	PRG_1E:   start = $C000, size = $3ffa, file = %O, fill = yes;  # Fixed high
	VECTORS:  start = $FFFA, size = $0006, file = %O, fill = yes;  # Vectors
	
	# RAM regions (not in file)
	ZEROPAGE: start = $0000, size = $0100, type = rw;
	STACK:    start = $0100, size = $0100, type = rw;
	OAM:      start = $0200, size = $0100, type = rw;
	RAM:      start = $0300, size = $0500, type = rw;
	WRAM:     start = $6000, size = $2000, type = rw;
}

SEGMENTS {
	HEADER:       load = HEADER,   type = ro;
	
	# Main code segments
	PRG_BANK_00:  load = PRG_00,   type = ro;
	PRG_BANK_01:  load = PRG_01,   type = ro;
	PRG_BANK_02:  load = PRG_02,   type = ro;
	PRG_BANK_03:  load = PRG_03,   type = ro;
	PRG_BANK_04:  load = PRG_04,   type = ro;
	PRG_BANK_05:  load = PRG_05,   type = ro;
	PRG_BANK_06:  load = PRG_06,   type = ro;
	PRG_BANK_07:  load = PRG_07,   type = ro;
	
	# Data bank
	PRG_BANK_08:  load = PRG_08,   type = ro;
	
	# Map banks
	PRG_BANK_09:  load = PRG_09,   type = ro;
	PRG_BANK_0A:  load = PRG_0A,   type = ro;
	PRG_BANK_0B:  load = PRG_0B,   type = ro;
	
	# Text banks
	PRG_BANK_0C:  load = PRG_0C,   type = ro;
	PRG_BANK_0D:  load = PRG_0D,   type = ro;
	PRG_BANK_0E:  load = PRG_0E,   type = ro;
	
	# Fixed bank
	PRG_BANK_0F:  load = PRG_0F,   type = ro;
	
	# Additional banks
	PRG_BANK_10:  load = PRG_10,   type = ro;
	PRG_BANK_11:  load = PRG_11,   type = ro;
	PRG_BANK_12:  load = PRG_12,   type = ro;
	PRG_BANK_13:  load = PRG_13,   type = ro;
	PRG_BANK_14:  load = PRG_14,   type = ro;
	PRG_BANK_15:  load = PRG_15,   type = ro;
	PRG_BANK_16:  load = PRG_16,   type = ro;
	PRG_BANK_17:  load = PRG_17,   type = ro;
	PRG_BANK_18:  load = PRG_18,   type = ro;
	PRG_BANK_19:  load = PRG_19,   type = ro;
	PRG_BANK_1A:  load = PRG_1A,   type = ro;
	PRG_BANK_1B:  load = PRG_1B,   type = ro;
	PRG_BANK_1C:  load = PRG_1C,   type = ro;
	PRG_BANK_1D:  load = PRG_1D,   type = ro;
	PRG_BANK_1E:  load = PRG_1E,   type = ro;
	
	# Vector table
	VECTORS:      load = VECTORS,  type = ro;
	
	# RAM segments
	ZEROPAGE:     load = ZEROPAGE, type = bss;
	OAM:          load = OAM,      type = bss;
	BSS:          load = RAM,      type = bss;
	WRAM:         load = WRAM,     type = bss;
}
